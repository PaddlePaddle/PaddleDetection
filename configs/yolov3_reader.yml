TrainReader:
  inputs_def:
    image_shape: [3, 608, 608]
    fields: ['image', 'gt_bbox', 'gt_class', 'gt_score']
    num_max_boxes: 50
  dataset:
    !COCODataSet
      image_dir: train2017
      anno_path: annotations/instances_train2017.json
      dataset_dir: dataset/coco
      with_background: False
      sample_num: 5000
  sample_transforms:
    - !DecodeImage
      to_rgb: True
      with_mixup: True
    - !MixupImage
      alpha: 1.5
      beta: 1.5
    - !NormalizeBox {}
    - !RandomDistort {}
    - !ExpandImage
      max_ratio: 4
      prob: 0.5
      mean: [123.675,116.28,103.53]
    - !CropImage
      batch_sampler: [[1, 1, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.1, 1.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.3, 1.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.5, 1.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.7, 1.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.9, 1.0],
        [1, 50, 0.3, 1.0, 0.5, 2.0, 0.0, 1.0]]
    - !RandomInterpImage
      target_size: 608
    - !RandomFlipImage
      is_normalized: True
    - !NormalizeImage
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]
      is_scale: True
      is_channel_first: False      
    - !PadBox
      num_max_boxes: 50
    - !BboxXYXY2XYWH {}
  batch_transforms:
  - !RandomShape
    sizes: [320, 352, 384, 416, 448, 480, 512, 544, 576, 608]
  - !Permute
    to_bgr: False
    channel_first: True
  batch_size: 8
  shuffle: true
  mixup_epoch: 250
  worker_num: 8
  bufsize: 128
  use_multi_process: true


EvalReader:
  inputs_def:
    image_shape: [3, 608, 608]
    fields: ['image', 'im_size', 'im_id']
    num_max_boxes: 50
  dataset:
    !COCODataSet
      image_dir: val2017
      anno_path: annotations/instances_val2017.json
      dataset_dir: dataset/coco
      with_background: False
  sample_transforms:
    - !DecodeImage
      to_rgb: True
    - !ResizeImage
      target_size: 608
      interp: 2
    - !NormalizeImage
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]
      is_scale: True
      is_channel_first: False      
    - !PadBox
      num_max_boxes: 50
    - !Permute
      to_bgr: False
      channel_first: True
  batch_size: 8
  worker_num: 8
  bufsize: 128

TestReader:
  inputs_def:
    image_shape: [3, 608, 608]
    fields: ['image', 'im_size', 'im_id']
  dataset:
    !ImageFolder
      anno_path: annotations/instances_val2017.json
      with_background: False
  sample_transforms:
    - !DecodeImage
      to_rgb: True
    - !ResizeImage
      target_size: 608
      interp: 2
    - !NormalizeImage
      mean: [0.485, 0.456, 0.406]
      std: [0.229, 0.224, 0.225]
      is_scale: True
      is_channel_first: False      
    - !Permute
      to_bgr: False
      channel_first: True
  batch_size: 1
