_BASE_: [
  '../datasets/mot.yml',
  '../runtime.yml',
  '_base_/deepsort_yolov3_darknet53_pcb_tracker.yml',
  '_base_/deepsort_reader_1088x608.yml',
]

metric: MOT

det_weights: https://paddledet.bj.bcebos.com/models/pedestrian_yolov3_darknet.pdparams
reid_weights: https://paddledet.bj.bcebos.com/models/PCB_plus_dropout_pyramid_resnet101.pdparams

DeepSORT:
  detector: YOLOv3
  reid: PCB_plus_dropout_pyramid
  tracker: DeepSORTTracker

YOLOv3:
  backbone: DarkNet
  neck: YOLOv3FPN
  yolo_head: YOLOv3Head
  post_process: BBoxPostProcess

BBoxPostProcess:
  decode:
    name: YOLOBox
    conf_thresh: 0.2
    downsample_ratio: 32
    clip_bbox: true
  nms:
    name: MultiClassNMS
    keep_top_k: 100
    score_threshold: 0.01
    nms_threshold: 0.45
    nms_top_k: 1000

PCB_plus_dropout_pyramid:
  num_conv_out_channels: 128
  num_classes: 751

DeepSORTTracker:
  metric_type: 'cosine'
  matching_threshold: 0.2
  budget: 100
  max_iou_distance: 0.9
  max_age: 70
  n_init: 3
  motion: 'KalmanFilter'
