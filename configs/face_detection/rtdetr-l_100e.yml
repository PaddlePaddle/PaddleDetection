_BASE_: [
  '../datasets/wider_face.yml',
  '../runtime.yml',
  '../rtdetr/_base_/rtdetr_r50vd.yml',
  '../rtdetr/_base_/rtdetr_reader.yml'
]

# Optimizer
epoch: 100
save_dir: output/rtdetr-l_100e

LearningRate:
  base_lr: 0.0001
  schedulers:
  - !PiecewiseDecay
    gamma: 1.0
    milestones: [100]
  - !LinearWarmup
    start_factor: 0.001
    steps: 2000

OptimizerBuilder:
  clip_grad_by_norm: 0.1
  regularizer: false
  optimizer:
    type: AdamW
    weight_decay: 0.0001

# Model
weights: output/rtdetr_hgnetv2_l_6x_coco/model_final
pretrain_weights: https://bj.bcebos.com/v1/paddledet/models/pretrained/PPHGNetV2_L_ssld_pretrained.pdparams
find_unused_parameters: True
log_iter: 200

worker_num: 0
DETR:
  backbone: PPHGNetV2

PPHGNetV2:
  arch: 'L'
  return_idx: [1, 2, 3]
  freeze_stem_only: True
  freeze_at: 0
  freeze_norm: True
  lr_mult_list: [0., 0.05, 0.05, 0.05, 0.05]

multi_scale_eval: True
weights: output/rtdetr-l_100e/model_final
eval_size:
