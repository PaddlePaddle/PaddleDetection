_BASE_: [
  '../datasets/coco_detection.yml',
  '../runtime.yml',
  '_base_/optimizer_6x.yml',
  '_base_/rtdetr_r50vd.yml',
  '_base_/rtdetr_reader.yml',
]

weights: output/rtdetr_hgnetv2_l_6x_coco/model_final
find_unused_parameters: True
log_iter: 200

pretrain_weights: https://bj.bcebos.com/v1/paddledet/models/pretrained/hgnet_v2_x_pretrained.pdparams


DETR:
  backbone: PPHGNetV2


PPHGNetV2:
  stem_channels: [32, 32, 64]
  stage_config: {
        "stage1": [64, 64, 128, 1, False, False, 3, "ReLU"],
        "stage2": [128, 128, 512, 2, True, False, 3, "ReLU"],
        "stage3": [512, 256, 1024, 5, True, True, 5, "ReLU"],
        "stage4": [1024, 512, 2048, 2, True, True, 5, "ReLU"],
  }
  return_idx: [1, 2, 3]
  freeze_stem_only: True
  freeze_at: 0
  freeze_norm: True
  lr_mult_list: [0.01, 0.01, 0.01, 0.01]


HybridEncoder:
  hidden_dim: 384
  use_encoder_idx: [2]
  num_encoder_layers: 1
  encoder_layer:
    name: TransformerLayer
    d_model: 384
    nhead: 8
    dim_feedforward: 2048
    dropout: 0.
    activation: 'gelu'
  expansion: 1.0
